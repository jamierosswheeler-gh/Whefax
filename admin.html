<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>WHEFAX Admin</title>
<link rel="manifest" href="manifest.webmanifest?v=3"><meta name="theme-color" content="#000000">
<link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16.png">
<link rel="apple-touch-icon" href="assets/apple-touch-icon.png">
<link rel="stylesheet" href="styles.css">
<script>if('serviceWorker'in navigator){addEventListener('load',()=>navigator.serviceWorker.register('sw.js'))}</script></head>
<body>
<header class="hero"><img src="assets/header-whefax.png" alt="WHEFAX HOLIDAYS"></header>

<div class="ticker-bar"><div class="left">WHEFAX 101</div><div class="right ticker-time">00:00:00</div></div>

<div class="container">
  <h1 class="title">Admin</h1>
  <div class="card">
    <div class="kv"><div>Admin PIN</div><div><input id="pin" class="input" placeholder="Set or enter PIN"></div></div>
    <div class="tags"><a class="btn" id="setPin">Set/Update PIN</a><a class="btn" id="unlock">Unlock</a></div>
    <p class="notice">Client-side PIN only (obfuscation). Keep this URL private.</p>
  </div>
  <div id="panel" style="display:none">
    <div class="card">
      <h2 class="title">Add a Deal</h2>
      <textarea id="raw" rows="8" class="input" placeholder="Flights:, Hotel:, Board:, Transfers:, Other:, Price: £, Dates:, From:, To: ... or free text"></textarea>
      <input id="flightLink" class="input" placeholder="Affiliate link — Flights">
      <input id="hotelLink" class="input" placeholder="Affiliate link — Hotel">
      <input id="image" class="input" placeholder="Cover image URL (optional)">
      <input id="tagsInput" class="input" placeholder="Tags (comma separated)">
      <div class="tags" id="quickTags" aria-label="Quick tags">
        <span class="tag" tabindex="0" role="button">Beach</span><span class="tag" tabindex="0" role="button">City Break</span><span class="tag" tabindex="0" role="button">All Inclusive</span><span class="tag" tabindex="0" role="button">Family</span><span class="tag" tabindex="0" role="button">Ski</span><span class="tag" tabindex="0" role="button">Weekend</span><span class="tag" tabindex="0" role="button">Long Haul</span><span class="tag" tabindex="0" role="button">Winter Sun</span>
      </div>
      <div class="tags"><a class="btn" id="condense">Condense</a><a class="btn" id="save">Save Locally</a></div>
      <pre id="preview" class="card"></pre>
    </div>
    <div class="card">
      <h2 class="title">Settings</h2>
      <div class="kv"><div>GitHub Username</div><div><input id="ghUser" class="input" value="jamierosswheeler-gh"></div></div>
      <div class="kv"><div>Repo Name</div><div><input id="ghRepo" class="input" value="WHEFAX"></div></div>
      <div class="kv"><div>Token (PAT)</div><div><input id="ghToken" class="input" placeholder="ghp_..."></div></div>
      <div class="kv"><div>Site Base URL</div><div><input id="siteBase" class="input" placeholder="https://jamierosswheeler-gh.github.io/WHEFAX"></div></div>
      <div class="kv"><div>WhatsApp Number</div><div><input id="whats" class="input" value="+447824338196"></div></div>
      <div class="tags"><a class="btn" id="saveSettings">Save Settings</a></div>
      <p class="notice">Token & numbers stored only on this device (local storage).</p>
    </div>
    <div class="card">
      <h2 class="title">Publish</h2>
      <div class="tags"><a class="btn" id="export">Export deals.json</a><a class="btn blue" id="publish">Publish to GitHub</a></div>
      <p class="notice">Publishes <code>data/deals.json</code> to your repo via GitHub API.</p>
    </div>
  </div>
</div>
<footer class="bar bottom">WHEFAX</footer>
<div class="bar bottom teletext-links">
  <a href="#" data-go="deals"   class="tlink red">DEALS</a>
  <span class="sep">•</span>
  <a href="#" data-go="finder"  class="tlink green">FINDER</a>
  <span class="sep">•</span>
  <a href="#" data-go="request" class="tlink yellow">REQUEST</a>
  <span class="sep">•</span>
  <a href="#" data-go="about"   class="tlink blue">ABOUT</a>
</div>
<script>(function(){const c=document.querySelector('.teletext-links'); if(!c) return; c.addEventListener('click',function(e){const a=e.target.closest('a[data-go]'); if(!a) return; e.preventDefault(); const name=a.getAttribute('data-go'); const key=document.querySelector('.tabkey[data-tab="'+name+'"]'); if(key){key.click();} else { try{localStorage.setItem('whefax.tab', name);}catch(_){} window.location.href='index.html'; } });})();</script>

<script src="admin.js"></script>

<script>(function(){function tick(){var el=document.querySelector('.ticker-time'); if(!el) return; var n=new Date(); var hh=String(n.getHours()).padStart(2,'0'); var mm=String(n.getMinutes()).padStart(2,'0'); var ss=String(n.getSeconds()).padStart(2,'0'); el.textContent=hh+':'+mm+':'+ss;} setInterval(tick,1000); setTimeout(tick,50);} )();</script>

</body></html>
